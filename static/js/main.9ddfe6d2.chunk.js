(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{81:function(e,t,n){"use strict";n.r(t);var r,c,o,a,i,s,d,u,l,b,j,p,x,g,O,f,h,m,v,w,k,y,S,P,z,B,E,C,T=n(54),L=n.n(T),I=n(37),F=n(57),M=n(5),N=n(8),R=n(28),J=n(9),$=n(4),D=function(){return Object($.jsx)("div",{children:"This page doesn\xa0t exist."})},Y=I.b,A=I.c,H=n(32),U=n(25),q={storage:[],statusLoading:"idle",error:null},G=Object(U.b)({name:"products",initialState:q,reducers:{loadProducts:function(){},setProducts:function(e,t){e.storage=t.payload},setStatus:function(e,t){e.statusLoading=t.payload},setError:function(e,t){e.error=t.payload,e.statusLoading="failed"},resetState:function(e){return Object(H.a)(Object(H.a)({},e),q)}}}),K=G.reducer,Q=G.actions,V=Q.loadProducts,W=Q.setProducts,X=Q.setStatus,Z=Q.setError,_=(Q.resetState,function(e){return e.products.storage}),ee=function(e){return e.products.statusLoading},te=function(e){return e.products.error},ne=n.p+"static/media/star-icon.bdc56500.svg",re=J.c.button(r||(r=Object(N.a)(["\n  padding: 0;\n  margin: 0;\n  border: none;\n  background-color: transparent;\n  outline: none;\n  justify-content: center;\n  cursor: pointer;\n  height: fit-content;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: 'Raleway', sans-serif;\n\n  &:hover{\n    text-decoration: underline;\n  }\n"]))),ce={storage:[],total:0,showSuccess:!1,statusPosting:"idle",error:null},oe=Object(U.b)({name:"basket",initialState:ce,reducers:{addProductToBasket:function(e,t){var n=t.payload,r=n.count,c=n.product,o=e.storage.findIndex((function(e){return e.product.id===c.id}));o>=0?e.storage[o].countOrdered+=r:e.storage.push({product:c,countOrdered:r}),e.total=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100},removeProductFromBasket:function(e,t){var n=t.payload,r=n.count,c=n.product,o=e.storage.findIndex((function(e){return e.product.id===c.id}));o>=0&&e.storage[o].countOrdered>=r&&(e.storage[o].countOrdered-=r,e.total=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100)},deleteProductInBasket:function(e,t){var n=t.payload.product,r=e.storage.findIndex((function(e){return e.product.id===n.id}));r>=0&&(e.storage.splice(r,1),e.total=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100)},sendOrderToServer:function(){console.log("sendOrderToServer")},setShowSuccess:function(e,t){e.showSuccess=t.payload},setStatusPosting:function(e,t){e.statusPosting=t.payload},setError:function(e,t){e.error=t.payload,e.statusPosting="failed"},clearBasket:function(){return ce}}}),ae=oe.reducer,ie=oe.actions,se=ie.addProductToBasket,de=ie.removeProductFromBasket,ue=ie.deleteProductInBasket,le=ie.sendOrderToServer,be=ie.setShowSuccess,je=ie.setStatusPosting,pe=ie.setError,xe=ie.clearBasket,ge=function(e){return e.basket.storage},Oe=function(e){return e.basket.total},fe=function(e){return e.basket.showSuccess},he=J.c.div(c||(c=Object(N.a)(["\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 280px;\n  height: 400px;\n  border-radius: 10px;\n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  margin: 10px;\n  box-sizing: border-box;\n  padding: 0 0 20px;\n"]))),me=J.c.img(o||(o=Object(N.a)(["\n  width: 100%;\n  height: 250px;\n  object-fit: cover;\n  overflow: hidden;\n"]))),ve=J.c.div(a||(a=Object(N.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n"]))),we=J.c.div(i||(i=Object(N.a)(["\n  font-size: 12px;\n  padding: 0;\n"]))),ke=J.c.h2(s||(s=Object(N.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 10px;\n  max-width: 250px;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: normal;\n  height: 48px;\n"]))),ye=J.c.p(d||(d=Object(N.a)(["\n  font-size: 14px;\n  text-align: center;\n  max-height: 50px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: break-word;\n"]))),Se=J.c.h3(u||(u=Object(N.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  margin-top: 10px;\n"]))),Pe=J.c.div(l||(l=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n"]))),ze=J.c.span(b||(b=Object(N.a)(["\n  font-size: 14px;\n  margin-left: 5px;\n"]))),Be=function(e){var t=e.product,n=t.category,r=t.description,c=t.image,o=t.price,a=t.rating,i=t.title,s=a.count,d=Y();return Object($.jsxs)(he,{onDragStart:function(e){e.dataTransfer.setData("text/plain",JSON.stringify(t))},children:[Object($.jsx)(me,{src:c,alt:r}),Object($.jsxs)(ve,{children:[Object($.jsx)(we,{children:n}),Object($.jsx)(ke,{children:i}),Object($.jsx)(ye,{children:r}),Object($.jsxs)(Se,{children:["$",o]}),Object($.jsxs)(Pe,{children:[Object($.jsx)("img",{src:ne,alt:"star icon"}),Object($.jsx)(ze,{children:"".concat(s," available")})]})]}),Object($.jsx)(re,{onClick:function(){d(se({product:t,count:1}))},children:"Buy"})]})},Ee=Object(J.d)(j||(j=Object(N.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Ce=J.c.div(p||(p=Object(N.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n"]))),Te=J.c.div(x||(x=Object(N.a)(["\n  border-radius: 50%;\n  width: 2em;\n  height: 2em;\n  margin: 1em auto;\n  border: 0.3em solid #ddd;\n  border-left-color: #000;\n  animation: "," 1.2s infinite linear;\n"])),Ee),Le=function(){return console.log("Loader ...."),Object($.jsx)(Ce,{children:Object($.jsx)(Te,{})})},Ie=J.c.div(g||(g=Object(N.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n\n  ","\n"])),(function(e){return"error"===e.status&&Object(J.b)(O||(O=Object(N.a)(["\n    color: red;\n  "])))})),Fe=function(e){var t=e.message,n=e.status,r=void 0===n?"casual":n;return Object($.jsx)(Ie,{status:r,children:Object($.jsx)("h2",{children:t})})},Me=J.c.div(f||(f=Object(N.a)(["\n  margin: 0 auto;\n  grid-template-columns: repeat(4, minmax(400px, 1fr));\n  gap: 20px;\n  margin: 0 auto;\n  padding: 20px;\n"]))),Ne=function(){var e=A(_),t="loading"===A(ee),n=A(te);return n?Object($.jsx)(Fe,{message:n,status:"error"}):t?Object($.jsx)(Le,{}):Object($.jsx)(Me,{children:e.length>0&&e.map((function(e){return Object($.jsx)(Be,{product:e},e.id)}))})},Re=n(27),Je=J.c.div(h||(h=Object(N.a)(["\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n"]))),$e=function(){var e=Y(),t=A(ge),n=A(_);return Object($.jsxs)(Je,{children:[Object($.jsx)(R.a,{to:"/",children:Object($.jsx)(Re.d,{})}),!n.length&&Object($.jsx)(re,{onClick:function(){return e(V())},children:"Load products"}),!!t.length&&Object($.jsx)(re,{onClick:function(){return e(xe())},children:"Clear basket"}),Object($.jsx)(R.a,{to:"basket",children:t.length?Object($.jsx)(Re.b,{size:"2rem",color:"black"}):Object($.jsx)(Re.c,{size:"2rem",color:"grey"})})]})},De=n(0),Ye=J.c.div(m||(m=Object(N.a)(["\n  & h2 {\n    text-align: center;\n  }\n"]))),Ae=J.c.div(v||(v=Object(N.a)(["\n  border-bottom: 1px solid black;\n"]))),He=J.c.div(w||(w=Object(N.a)(["\n  padding: 10px 0;\n  border-bottom: 1px solid black;\n  text-align: right;\n"]))),Ue=J.c.div(k||(k=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 10px;\n"]))),qe=J.c.div(y||(y=Object(N.a)(["\n  width: 500px;\n"]))),Ge=J.c.div(S||(S=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),Ke=J.c.div(P||(P=Object(N.a)(["\n  margin-left: 30px;\n  width: 100px;\n  text-align: right;\n"]))),Qe=Object(J.c)(re)(z||(z=Object(N.a)(["\n  margin: 100px auto;\n  font-size: 30px;\n"]))),Ve=function(){var e=Y(),t=A(ge),n=A(Oe),r="loading"===A(ee),c=A(te),o=A(fe),a=Object(M.m)();Object(De.useEffect)((function(){o&&setTimeout((function(){e(xe()),a("/")}),3e3)}),[o]);return c?Object($.jsx)(Fe,{message:c,status:"error"}):r?Object($.jsx)(Le,{}):o?Object($.jsx)(Fe,{message:"Order sent",status:"casual"}):Object($.jsx)("div",{children:t.length?Object($.jsxs)(Ye,{children:[Object($.jsx)(Ae,{children:t.map((function(t){return Object($.jsxs)(Ue,{children:[Object($.jsx)(qe,{children:t.product.title}),Object($.jsxs)(Ge,{children:[Object($.jsx)(re,{onClick:function(){return n=t.product,r=t.countOrdered,void e(1!==r?de({product:n,count:1}):ue({product:n}));var n,r},children:Object($.jsx)(Re.e,{size:"2rem"})}),t.countOrdered,Object($.jsx)(re,{onClick:function(){return n=t.product,void e(se({product:n,count:1}));var n},children:Object($.jsx)(Re.a,{size:"2rem"})}),Object($.jsx)(re,{onClick:function(){return n=t.product,void e(ue({product:n}));var n},children:Object($.jsx)(Re.f,{size:"2rem"})}),Object($.jsx)(Ke,{children:"$".concat(Math.round(t.countOrdered*+t.product.price*100)/100)})]})]},t.product.id)}))}),Object($.jsxs)(He,{children:["Total:\xa0\xa0\xa0$",n]}),Object($.jsx)(Qe,{onClick:function(){return e(le())},children:"Order"})]}):Object($.jsx)(Fe,{message:"Basket is empty",status:void 0})})},We=J.c.div(B||(B=Object(N.a)(["\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100vh;\n  "]))),Xe=J.c.header(E||(E=Object(N.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n  text-align: center;\n  margin-bottom: 1rem;\n"]))),Ze=J.c.main(C||(C=Object(N.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n"])));function _e(){return Object($.jsxs)(We,{children:[Object($.jsxs)(Xe,{children:[Object($.jsx)("h1",{children:"Shop"}),Object($.jsx)($e,{})]}),Object($.jsx)(Ze,{children:Object($.jsx)(M.a,{})})]})}var et=Object(R.b)([{path:"/",element:Object($.jsx)(_e,{}),errorElement:Object($.jsx)(D,{}),id:"root",children:[{path:"/",element:Object($.jsx)(Ne,{}),id:"homePage",errorElement:Object($.jsx)($.Fragment,{children:"Error on HomePage"})},{path:"/basket",element:Object($.jsx)(Ve,{}),id:"basketPage",errorElement:Object($.jsx)($.Fragment,{children:"Error on BasketPage"})}]}]),tt=n(17),nt=n(23),rt=n(62),ct=n(61),ot=n.n(ct),at=n(6),it=n.n(at),st=n(16),dt=n(14),ut=n(83),lt="https://fakestoreapi.com/products",bt=ut.a.create({baseURL:lt}),jt=function(e){return Object(dt.a)(it.a.mark((function t(){var n;return it.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.get(e);case 2:return n=t.sent,console.log("get",lt+e),t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()},pt=it.a.mark(xt);function xt(){var e;return it.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("getProductsSaga"),t.next=3,Object(st.b)(X("loading"));case 3:return t.prev=3,t.next=6,Object(st.a)(3e3);case 6:return t.next=8,jt("/");case 8:return e=t.sent,console.log(e),t.next=12,Object(st.b)(W(e));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(3),t.next=18,Object(st.b)(Z(t.t0.message));case 18:return t.prev=18,t.next=21,Object(st.b)(X("idle"));case 21:return t.finish(18);case 22:case"end":return t.stop()}}),pt,null,[[3,14,18,22]])}var gt=it.a.mark(Ot);function Ot(){var e,t;return it.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("sendOrderSaga"),n.next=3,Object(st.b)(je("posting"));case 3:return n.prev=3,n.next=6,Object(st.a)(5e3);case 6:return n.next=8,Object(st.c)((function(e){return e.basket.storage}));case 8:return e=n.sent,console.log("Your order is:"),e.forEach((function(e){console.log(e.product.title,e.countOrdered)})),n.next=13,Object(st.c)((function(e){return e.basket.total}));case 13:return t=n.sent,console.log("Your total sum is:",t),n.next=17,Object(st.b)(be(!0));case 17:n.next=23;break;case 19:return n.prev=19,n.t0=n.catch(3),n.next=23,Object(st.b)(pe(n.t0.message));case 23:return n.prev=23,n.next=26,Object(st.b)(je("idle"));case 26:return n.finish(23);case 27:case"end":return n.stop()}}),gt,null,[[3,19,23,27]])}var ft=it.a.mark(ht);function ht(){return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("watchSaga"),e.next=3,Object(st.e)(V().type,xt);case 3:return e.next=5,Object(st.d)(le().type,Ot);case 5:case"end":return e.stop()}}),ft)}var mt=it.a.mark(vt);function vt(){return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("root saga"),e.next=3,ht();case 3:case"end":return e.stop()}}),mt)}var wt,kt={popup:{}},yt=Object(U.b)({name:"controls",initialState:kt,reducers:{resetState:function(){return kt}}}),St=yt.reducer,Pt=(yt.actions.resetState,Object(rt.a)()),zt={key:"root",storage:ot.a,whitelist:["basket","product"]},Bt=Object(tt.b)({control:St,products:K,basket:ae}),Et=Object(nt.g)(zt,Bt),Ct=Object(U.a)({reducer:Et,middleware:function(e){return e({serializableCheck:{ignoredActions:[nt.a,nt.f,nt.b,nt.c,nt.d,nt.e]}}).concat(Pt)}}),Tt=Object(nt.h)(Ct);Pt.run(vt);var Lt=Object(J.a)(wt||(wt=Object(N.a)(["\n  * {\n    font-family: 'Raleway', sans-serif;\n    user-select: none;\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n"])));L.a.createRoot(document.getElementById("root")).render(Object($.jsxs)($.Fragment,{children:[Object($.jsx)(Lt,{}),Object($.jsx)(I.a,{store:Ct,children:Object($.jsx)(F.a,{loading:null,persistor:Tt,children:Object($.jsx)(M.c,{router:et})})})]}))}},[[81,1,2]]]);
//# sourceMappingURL=main.9ddfe6d2.chunk.js.map