(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{81:function(e,t,n){"use strict";n.r(t);var r,c,o,a,i,s,d,u,l,b,j,p,x,g,O,f,h,m,v,w,k,y,S,P,z,C,B,E,T=n(54),L=n.n(T),F=n(37),I=n(57),M=n(5),N=n(8),R=n(28),J=n(9),$=n(3),D=function(){return Object($.jsx)("div",{children:"This page doesn\xa0t exist."})},Y=F.b,A=F.c,H=n(32),U=n(25),q={storage:[],statusLoading:"idle",error:null},G=Object(U.b)({name:"products",initialState:q,reducers:{loadProducts:function(){},setProducts:function(e,t){e.storage=t.payload},setStatus:function(e,t){e.statusLoading=t.payload},setError:function(e,t){e.error=t.payload,e.statusLoading="failed"},resetState:function(e){return Object(H.a)(Object(H.a)({},e),q)}}}),K=G.reducer,Q=G.actions,V=Q.loadProducts,W=Q.setProducts,X=Q.setStatus,Z=Q.setError,_=(Q.resetState,function(e){return e.products.storage}),ee=function(e){return e.products.statusLoading},te=function(e){return e.products.error},ne=n.p+"static/media/star-icon.bdc56500.svg",re=J.c.button(r||(r=Object(N.a)(["\n  padding: 0;\n  margin: 0;\n  border: none;\n  background-color: transparent;\n  outline: none;\n  justify-content: center;\n  cursor: pointer;\n  height: fit-content;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: 'Raleway', sans-serif;\n\n  &:hover{\n    text-decoration: underline;\n  }\n"]))),ce={storage:[],totalSum:0,totalCount:0,showSuccess:!1,statusPosting:"idle",error:null},oe=Object(U.b)({name:"basket",initialState:ce,reducers:{addProductToBasket:function(e,t){var n=t.payload,r=n.count,c=n.product,o=e.storage.findIndex((function(e){return e.product.id===c.id}));o>=0?e.storage[o].countOrdered+=r:e.storage.push({product:c,countOrdered:r}),e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0)},removeProductFromBasket:function(e,t){var n=t.payload,r=n.count,c=n.product,o=e.storage.findIndex((function(e){return e.product.id===c.id}));o>=0&&e.storage[o].countOrdered>=r&&(e.storage[o].countOrdered-=r,e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0))},deleteProductInBasket:function(e,t){var n=t.payload.product,r=e.storage.findIndex((function(e){return e.product.id===n.id}));r>=0&&(e.storage.splice(r,1),e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0))},sendOrderToServer:function(){console.log("sendOrderToServer")},setShowSuccess:function(e,t){e.showSuccess=t.payload},setStatusPosting:function(e,t){e.statusPosting=t.payload},setError:function(e,t){e.error=t.payload,e.statusPosting="failed"},clearBasket:function(){return ce}}}),ae=oe.reducer,ie=oe.actions,se=ie.addProductToBasket,de=ie.removeProductFromBasket,ue=ie.deleteProductInBasket,le=ie.sendOrderToServer,be=ie.setShowSuccess,je=ie.setStatusPosting,pe=ie.setError,xe=ie.clearBasket,ge=function(e){return e.basket.storage},Oe=function(e){return e.basket.totalSum},fe=function(e){return e.basket.totalCount},he=function(e){return e.basket.showSuccess},me=J.c.div(c||(c=Object(N.a)(["\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 280px;\n  height: 400px;\n  border-radius: 10px;\n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  margin: 10px;\n  box-sizing: border-box;\n  padding: 0 0 20px;\n"]))),ve=J.c.img(o||(o=Object(N.a)(["\n  width: 100%;\n  height: 250px;\n  object-fit: cover;\n  overflow: hidden;\n"]))),we=J.c.div(a||(a=Object(N.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n"]))),ke=J.c.div(i||(i=Object(N.a)(["\n  font-size: 12px;\n  padding: 0;\n"]))),ye=J.c.h2(s||(s=Object(N.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 10px;\n  max-width: 250px;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: normal;\n  height: 48px;\n"]))),Se=J.c.p(d||(d=Object(N.a)(["\n  font-size: 14px;\n  text-align: center;\n  max-height: 50px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: break-word;\n"]))),Pe=J.c.h3(u||(u=Object(N.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  margin-top: 10px;\n"]))),ze=J.c.div(l||(l=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n"]))),Ce=J.c.span(b||(b=Object(N.a)(["\n  font-size: 14px;\n  margin-left: 5px;\n"]))),Be=function(e){var t=e.product,n=t.category,r=t.description,c=t.image,o=t.price,a=t.rating,i=t.title,s=a.count,d=Y();return Object($.jsxs)(me,{onDragStart:function(e){e.dataTransfer.setData("text/plain",JSON.stringify(t))},children:[Object($.jsx)(ve,{src:c,alt:r}),Object($.jsxs)(we,{children:[Object($.jsx)(ke,{children:n}),Object($.jsx)(ye,{children:i}),Object($.jsx)(Se,{children:r}),Object($.jsxs)(Pe,{children:["$",o]}),Object($.jsxs)(ze,{children:[Object($.jsx)("img",{src:ne,alt:"star icon"}),Object($.jsx)(Ce,{children:"".concat(s," available")})]})]}),Object($.jsx)(re,{onClick:function(){d(se({product:t,count:1}))},children:"Buy"})]})},Ee=Object(J.d)(j||(j=Object(N.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Te=J.c.div(p||(p=Object(N.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n"]))),Le=J.c.div(x||(x=Object(N.a)(["\n  border-radius: 50%;\n  width: 2em;\n  height: 2em;\n  margin: 1em auto;\n  border: 0.3em solid #ddd;\n  border-left-color: #000;\n  animation: "," 1.2s infinite linear;\n"])),Ee),Fe=function(){return console.log("Loader ...."),Object($.jsx)(Te,{children:Object($.jsx)(Le,{})})},Ie=J.c.div(g||(g=Object(N.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n\n  ","\n"])),(function(e){return"error"===e.status&&Object(J.b)(O||(O=Object(N.a)(["\n    color: red;\n  "])))})),Me=function(e){var t=e.message,n=e.status,r=void 0===n?"casual":n;return Object($.jsx)(Ie,{status:r,children:Object($.jsx)("h2",{children:t})})},Ne=J.c.div(f||(f=Object(N.a)(["\n  margin: 0 auto;\n  grid-template-columns: repeat(4, minmax(400px, 1fr));\n  gap: 20px;\n  margin: 0 auto;\n  padding: 20px;\n"]))),Re=function(){var e=A(_),t="loading"===A(ee),n=A(te);return n?Object($.jsx)(Me,{message:n,status:"error"}):t?Object($.jsx)(Fe,{}):Object($.jsx)(Ne,{children:e.length>0&&e.map((function(e){return Object($.jsx)(Be,{product:e},e.id)}))})},Je=n(27),$e=J.c.div(h||(h=Object(N.a)(["\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n"]))),De=function(){var e=Y(),t=A(ge),n=A(_),r=A(fe);return Object($.jsxs)($e,{children:[Object($.jsx)(R.a,{to:"/",children:Object($.jsx)(Je.d,{})}),!n.length&&Object($.jsx)(re,{onClick:function(){return e(V())},children:"Load products"}),!!t.length&&Object($.jsxs)($.Fragment,{children:[Object($.jsx)(re,{onClick:function(){return e(xe())},children:"Clear basket"}),"Total:",r]}),Object($.jsx)(R.a,{to:"basket",children:t.length?Object($.jsx)(Je.b,{size:"2rem",color:"black"}):Object($.jsx)(Je.c,{size:"2rem",color:"grey"})})]})},Ye=n(0),Ae=J.c.div(m||(m=Object(N.a)(["\n  & h2 {\n    text-align: center;\n  }\n"]))),He=J.c.div(v||(v=Object(N.a)(["\n  border-bottom: 1px solid black;\n"]))),Ue=J.c.div(w||(w=Object(N.a)(["\n  padding: 10px 0;\n  border-bottom: 1px solid black;\n  text-align: right;\n"]))),qe=J.c.div(k||(k=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 10px;\n"]))),Ge=J.c.div(y||(y=Object(N.a)(["\n  width: 500px;\n"]))),Ke=J.c.div(S||(S=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),Qe=J.c.div(P||(P=Object(N.a)(["\n  margin-left: 30px;\n  width: 100px;\n  text-align: right;\n"]))),Ve=Object(J.c)(re)(z||(z=Object(N.a)(["\n  margin: 100px auto;\n  font-size: 30px;\n"]))),We=function(){var e=Y(),t=A(ge),n=A(Oe),r="loading"===A(ee),c=A(te),o=A(he),a=Object(M.m)();Object(Ye.useEffect)((function(){o&&setTimeout((function(){e(xe()),a("/")}),3e3)}),[o]);return c?Object($.jsx)(Me,{message:c,status:"error"}):r?Object($.jsx)(Fe,{}):o?Object($.jsx)(Me,{message:"Order sent",status:"casual"}):Object($.jsx)("div",{children:t.length?Object($.jsxs)(Ae,{children:[Object($.jsx)(He,{children:t.map((function(t){return Object($.jsxs)(qe,{children:[Object($.jsx)(Ge,{children:t.product.title}),Object($.jsxs)(Ke,{children:[Object($.jsx)(re,{onClick:function(){return n=t.product,r=t.countOrdered,void e(1!==r?de({product:n,count:1}):ue({product:n}));var n,r},children:Object($.jsx)(Je.e,{size:"2rem"})}),t.countOrdered,Object($.jsx)(re,{onClick:function(){return n=t.product,void e(se({product:n,count:1}));var n},children:Object($.jsx)(Je.a,{size:"2rem"})}),Object($.jsx)(re,{onClick:function(){return n=t.product,void e(ue({product:n}));var n},children:Object($.jsx)(Je.f,{size:"2rem"})}),Object($.jsx)(Qe,{children:"$".concat(Math.round(t.countOrdered*+t.product.price*100)/100)})]})]},t.product.id)}))}),Object($.jsxs)(Ue,{children:["Total:\xa0\xa0\xa0$",n]}),Object($.jsx)(Ve,{onClick:function(){return e(le())},children:"Order"})]}):Object($.jsx)(Me,{message:"Basket is empty",status:void 0})})},Xe=J.c.div(C||(C=Object(N.a)(["\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100vh;\n  "]))),Ze=J.c.header(B||(B=Object(N.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n  text-align: center;\n  margin-bottom: 1rem;\n"]))),_e=J.c.main(E||(E=Object(N.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n"])));function et(){return Object($.jsxs)(Xe,{children:[Object($.jsxs)(Ze,{children:[Object($.jsx)("h1",{children:"Shop"}),Object($.jsx)(De,{})]}),Object($.jsx)(_e,{children:Object($.jsx)(M.a,{})})]})}var tt=Object(R.b)([{path:"/",element:Object($.jsx)(et,{}),errorElement:Object($.jsx)(D,{}),id:"root",children:[{path:"/",element:Object($.jsx)(Re,{}),id:"homePage",errorElement:Object($.jsx)($.Fragment,{children:"Error on HomePage"})},{path:"/basket",element:Object($.jsx)(We,{}),id:"basketPage",errorElement:Object($.jsx)($.Fragment,{children:"Error on BasketPage"})}]}]),nt=n(17),rt=n(23),ct=n(62),ot=n(61),at=n.n(ot),it=n(6),st=n.n(it),dt=n(16),ut=n(14),lt=n(83),bt="https://fakestoreapi.com/products",jt=lt.a.create({baseURL:bt}),pt=function(e){return Object(ut.a)(st.a.mark((function t(){var n;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jt.get(e);case 2:return n=t.sent,console.log("get",bt+e),t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()},xt=st.a.mark(gt);function gt(){var e;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("getProductsSaga"),t.next=3,Object(dt.b)(X("loading"));case 3:return t.prev=3,t.next=6,Object(dt.a)(3e3);case 6:return t.next=8,pt("/");case 8:return e=t.sent,console.log(e),t.next=12,Object(dt.b)(W(e));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(3),t.next=18,Object(dt.b)(Z(t.t0.message));case 18:return t.prev=18,t.next=21,Object(dt.b)(X("idle"));case 21:return t.finish(18);case 22:case"end":return t.stop()}}),xt,null,[[3,14,18,22]])}var Ot=st.a.mark(ft);function ft(){var e,t;return st.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("sendOrderSaga"),n.next=3,Object(dt.b)(je("posting"));case 3:return n.prev=3,n.next=6,Object(dt.a)(5e3);case 6:return n.next=8,Object(dt.c)((function(e){return e.basket.storage}));case 8:return e=n.sent,console.log("Your order is:"),e.forEach((function(e){console.log(e.product.title,e.countOrdered)})),n.next=13,Object(dt.c)((function(e){return e.basket.totalSum}));case 13:return t=n.sent,console.log("Your total sum is:",t),n.next=17,Object(dt.b)(be(!0));case 17:n.next=23;break;case 19:return n.prev=19,n.t0=n.catch(3),n.next=23,Object(dt.b)(pe(n.t0.message));case 23:return n.prev=23,n.next=26,Object(dt.b)(je("idle"));case 26:return n.finish(23);case 27:case"end":return n.stop()}}),Ot,null,[[3,19,23,27]])}var ht=st.a.mark(mt);function mt(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("watchSaga"),e.next=3,Object(dt.e)(V().type,gt);case 3:return e.next=5,Object(dt.d)(le().type,ft);case 5:case"end":return e.stop()}}),ht)}var vt=st.a.mark(wt);function wt(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("root saga"),e.next=3,mt();case 3:case"end":return e.stop()}}),vt)}var kt,yt={popup:{}},St=Object(U.b)({name:"controls",initialState:yt,reducers:{resetState:function(){return yt}}}),Pt=St.reducer,zt=(St.actions.resetState,Object(ct.a)()),Ct={key:"root",storage:at.a,whitelist:["basket","products"]},Bt=Object(nt.b)({control:Pt,products:K,basket:ae}),Et=Object(rt.g)(Ct,Bt),Tt=Object(U.a)({reducer:Et,middleware:function(e){return e({thunk:!1,serializableCheck:{ignoredActions:[rt.a,rt.f,rt.b,rt.c,rt.d,rt.e]}}).concat(zt)}}),Lt=Object(rt.h)(Tt);zt.run(wt);var Ft=Object(J.a)(kt||(kt=Object(N.a)(["\n  * {\n    font-family: 'Raleway', sans-serif;\n    user-select: none;\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n"])));L.a.createRoot(document.getElementById("root")).render(Object($.jsxs)($.Fragment,{children:[Object($.jsx)(Ft,{}),Object($.jsx)(F.a,{store:Tt,children:Object($.jsx)(I.a,{loading:null,persistor:Lt,children:Object($.jsx)(M.c,{router:tt})})})]}))}},[[81,1,2]]]);
//# sourceMappingURL=main.cfb33799.chunk.js.map