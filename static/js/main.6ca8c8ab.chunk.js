(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{81:function(e,t,n){"use strict";n.r(t);var r,c,o,a,i,s,d,u,l,b,j,p,x,f,g,O,m,h,v,k,w,y,S,P,C,E,z,B,T,F=n(54),L=n.n(F),I=n(37),M=n(57),R=n(5),N=n(8),$=n(23),J=n(9),Y=n(3),A=function(){return Object(Y.jsx)("div",{children:"This page doesn\xa0t exist."})},H=n(0),U=I.b,q=I.c,D=n(32),G=n(26),K={storage:[],statusLoading:"idle",error:null},Q=Object(G.b)({name:"products",initialState:K,reducers:{loadProducts:function(){},setProducts:function(e,t){e.storage=t.payload},setStatus:function(e,t){e.statusLoading=t.payload},setError:function(e,t){e.error=t.payload,e.statusLoading="failed"},resetState:function(e){return Object(D.a)(Object(D.a)({},e),K)}}}),V=Q.reducer,W=Q.actions,X=W.loadProducts,Z=W.setProducts,_=W.setStatus,ee=W.setError,te=(W.resetState,function(e){return e.products.storage}),ne=function(e){return e.products.statusLoading},re=function(e){return e.products.error},ce=n.p+"static/media/star-icon.bdc56500.svg",oe=J.c.button(r||(r=Object(N.a)(["\n  padding: 0;\n  margin: 0;\n  border: none;\n  background-color: transparent;\n  outline: none;\n  justify-content: center;\n  cursor: pointer;\n  height: fit-content;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: 'Raleway', sans-serif;\n\n  &:hover{\n    text-decoration: underline;\n  }\n"]))),ae={storage:[],totalSum:0,totalCount:0,showSuccess:!1,statusPosting:"idle",error:null},ie=Object(G.b)({name:"basket",initialState:ae,reducers:{addProductToBasket:function(e,t){var n=t.payload,r=n.count,c=n.product,o=e.storage.findIndex((function(e){return e.product.id===c.id}));o>=0?e.storage[o].countOrdered+=r:e.storage.push({product:c,countOrdered:r}),e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0)},removeProductFromBasket:function(e,t){var n=t.payload,r=n.count,c=n.product,o=e.storage.findIndex((function(e){return e.product.id===c.id}));o>=0&&e.storage[o].countOrdered>=r&&(e.storage[o].countOrdered-=r,e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0))},deleteProductInBasket:function(e,t){var n=t.payload.product,r=e.storage.findIndex((function(e){return e.product.id===n.id}));r>=0&&(e.storage.splice(r,1),e.totalSum=Math.ceil(100*e.storage.reduce((function(e,t){return e+Number(t.product.price)*t.countOrdered}),0))/100,e.totalCount=e.storage.reduce((function(e,t){return e+t.countOrdered}),0))},sendOrderToServer:function(){console.log("sendOrderToServer")},setShowSuccess:function(e,t){e.showSuccess=t.payload},setStatusPosting:function(e,t){e.statusPosting=t.payload},setError:function(e,t){e.error=t.payload,e.statusPosting="failed"},clearBasket:function(){return ae}}}),se=ie.reducer,de=ie.actions,ue=de.addProductToBasket,le=de.removeProductFromBasket,be=de.deleteProductInBasket,je=de.sendOrderToServer,pe=de.setShowSuccess,xe=de.setStatusPosting,fe=de.setError,ge=de.clearBasket,Oe=function(e){return e.basket.storage},me=function(e){return e.basket.totalSum},he=function(e){return e.basket.totalCount},ve=function(e){return e.basket.showSuccess},ke=J.c.div(c||(c=Object(N.a)(["\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 280px;\n  height: 400px;\n  border-radius: 10px;\n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  margin: 10px;\n  box-sizing: border-box;\n  padding: 0 0 20px;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]))),we=J.c.img(o||(o=Object(N.a)(["\n  width: 100%;\n  height: 250px;\n  object-fit: cover;\n  overflow: hidden;\n"]))),ye=J.c.div(a||(a=Object(N.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n"]))),Se=J.c.div(i||(i=Object(N.a)(["\n  font-size: 12px;\n  padding: 0;\n"]))),Pe=J.c.h2(s||(s=Object(N.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 10px;\n  max-width: 250px;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: normal;\n  height: 48px;\n"]))),Ce=J.c.p(d||(d=Object(N.a)(["\n  font-size: 14px;\n  text-align: center;\n  max-height: 50px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-direction: normal;\n  -webkit-box-orient: vertical;\n  overflow-wrap: break-word;\n"]))),Ee=J.c.h3(u||(u=Object(N.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  margin-top: 10px;\n"]))),ze=J.c.div(l||(l=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n"]))),Be=J.c.span(b||(b=Object(N.a)(["\n  font-size: 14px;\n  margin-left: 5px;\n"]))),Te=function(e){var t=e.product,n=e.format,r=void 0===n?"card":n,c=t.category,o=t.description,a=t.image,i=t.price,s=t.rating,d=t.title,u=t.id,l=s.count,b=U(),j=Object(R.m)();return Object(Y.jsxs)(ke,{onClick:function(){j("product/".concat(u))},format:r,children:[Object(Y.jsx)(we,{src:a,alt:o,format:r}),Object(Y.jsxs)(ye,{format:r,children:[Object(Y.jsx)(Se,{format:r,children:c}),Object(Y.jsx)(Pe,{format:r,children:d}),Object(Y.jsx)(Ce,{format:r,children:o}),Object(Y.jsxs)(Ee,{format:r,children:["$",i]}),Object(Y.jsxs)(ze,{format:r,children:[Object(Y.jsx)("img",{src:ce,alt:"star icon"}),Object(Y.jsx)(Be,{format:r,children:"".concat(l," available")})]})]}),Object(Y.jsx)(oe,{onClick:function(e){return function(e){e.stopPropagation(),b(ue({product:t,count:1}))}(e)},children:"Buy"})]})},Fe=Object(J.d)(j||(j=Object(N.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Le=J.c.div(p||(p=Object(N.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n"]))),Ie=J.c.div(x||(x=Object(N.a)(["\n  border-radius: 50%;\n  width: 2em;\n  height: 2em;\n  margin: 1em auto;\n  border: 0.3em solid #ddd;\n  border-left-color: #000;\n  animation: "," 1.2s infinite linear;\n"])),Fe),Me=function(){return console.log("Loader ...."),Object(Y.jsx)(Le,{children:Object(Y.jsx)(Ie,{})})},Re=J.c.div(f||(f=Object(N.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n\n  ","\n"])),(function(e){return"error"===e.status&&Object(J.b)(g||(g=Object(N.a)(["\n    color: red;\n  "])))})),Ne=function(e){var t=e.message,n=e.status,r=void 0===n?"casual":n;return Object(Y.jsx)(Re,{status:r,children:Object(Y.jsx)("h2",{children:t})})},$e=J.c.div(O||(O=Object(N.a)(["\n  margin: 0 auto;\n  grid-template-columns: repeat(4, minmax(400px, 1fr));\n  gap: 20px;\n  margin: 0 auto;\n  padding: 20px;\n"]))),Je=function(){var e=U(),t=q(te),n="loading"===q(ne),r=q(re),c=0===q(he);return Object(H.useEffect)((function(){c||e(X())}),[]),r?Object(Y.jsx)(Ne,{message:r,status:"error"}):n?Object(Y.jsx)(Me,{}):Object(Y.jsx)($e,{children:t.length>0&&t.map((function(e){return Object(Y.jsx)(Te,{product:e},e.id)}))})},Ye=n(28),Ae=J.c.div(m||(m=Object(N.a)(["\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n"]))),He=function(){var e=U(),t=q(Oe),n=q(te),r=q(he);return Object(Y.jsxs)(Ae,{children:[Object(Y.jsx)($.a,{to:"/",children:Object(Y.jsx)(Ye.d,{})}),!n.length&&Object(Y.jsx)(oe,{onClick:function(){return e(X())},children:"Load products"}),!!t.length&&Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(oe,{onClick:function(){return e(ge())},children:"Clear basket"}),"Total:",r]}),Object(Y.jsx)($.a,{to:"basket",children:t.length?Object(Y.jsx)(Ye.b,{size:"2rem",color:"black"}):Object(Y.jsx)(Ye.c,{size:"2rem",color:"grey"})})]})},Ue=J.c.div(h||(h=Object(N.a)(["\n  & h2 {\n    text-align: center;\n  }\n"]))),qe=J.c.div(v||(v=Object(N.a)(["\n  border-bottom: 1px solid black;\n"]))),De=J.c.div(k||(k=Object(N.a)(["\n  padding: 10px 0;\n  border-bottom: 1px solid black;\n  text-align: right;\n"]))),Ge=J.c.div(w||(w=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 10px;\n"]))),Ke=J.c.div(y||(y=Object(N.a)(["\n  width: 500px;\n"]))),Qe=J.c.div(S||(S=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),Ve=J.c.div(P||(P=Object(N.a)(["\n  margin-left: 30px;\n  width: 100px;\n  text-align: right;\n"]))),We=Object(J.c)(oe)(C||(C=Object(N.a)(["\n  margin: 100px auto;\n  font-size: 30px;\n"]))),Xe=function(){var e=U(),t=q(Oe),n=q(me),r="loading"===q(ne),c=q(re),o=q(ve),a=Object(R.m)();Object(H.useEffect)((function(){o&&setTimeout((function(){e(ge()),a("/")}),3e3)}),[o]);return c?Object(Y.jsx)(Ne,{message:c,status:"error"}):r?Object(Y.jsx)(Me,{}):o?Object(Y.jsx)(Ne,{message:"Order sent",status:"casual"}):Object(Y.jsx)("div",{children:t.length?Object(Y.jsxs)(Ue,{children:[Object(Y.jsx)(qe,{children:t.map((function(t){return Object(Y.jsxs)(Ge,{children:[Object(Y.jsx)(Ke,{children:Object(Y.jsx)(oe,{onClick:function(){return a("/product/".concat(t.product.id))},children:t.product.title})}),Object(Y.jsxs)(Qe,{children:[Object(Y.jsx)(oe,{onClick:function(){return n=t.product,r=t.countOrdered,void e(1!==r?le({product:n,count:1}):be({product:n}));var n,r},children:Object(Y.jsx)(Ye.e,{size:"2rem"})}),t.countOrdered,Object(Y.jsx)(oe,{onClick:function(){return n=t.product,void e(ue({product:n,count:1}));var n},children:Object(Y.jsx)(Ye.a,{size:"2rem"})}),Object(Y.jsx)(oe,{onClick:function(){return n=t.product,void e(be({product:n}));var n},children:Object(Y.jsx)(Ye.f,{size:"2rem"})}),Object(Y.jsx)(Ve,{children:"$".concat(Math.round(t.countOrdered*+t.product.price*100)/100)})]})]},t.product.id)}))}),Object(Y.jsxs)(De,{children:["Total:\xa0\xa0\xa0$",n]}),Object(Y.jsx)(We,{onClick:function(){return e(je())},children:"Order"})]}):Object(Y.jsx)(Ne,{message:"Basket is empty",status:void 0})})},Ze=J.c.div(E||(E=Object(N.a)(["\n  margin: 0 auto;\n  grid-template-columns: repeat(4, minmax(400px, 1fr));\n  gap: 20px;\n  margin: 0 auto;\n  padding: 20px;\n"]))),_e=function(){var e=Object(R.o)().id,t=q(te).find((function(t){return String(t.id)===e}));return Object(Y.jsx)(Ze,{children:t&&Object(Y.jsx)(Te,{product:t})})},et=J.c.div(z||(z=Object(N.a)(["\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100vh;\n  "]))),tt=J.c.header(B||(B=Object(N.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n  text-align: center;\n  margin-bottom: 1rem;\n"]))),nt=J.c.main(T||(T=Object(N.a)(["\n  max-width: 1270px;\n  margin: 0 auto;\n"])));function rt(){return Object(Y.jsxs)(et,{children:[Object(Y.jsxs)(tt,{children:[Object(Y.jsx)("h1",{children:"Shop"}),Object(Y.jsx)(He,{})]}),Object(Y.jsx)(nt,{children:Object(Y.jsx)(R.a,{})})]})}var ct=Object($.b)([{path:"/",element:Object(Y.jsx)(rt,{}),errorElement:Object(Y.jsx)(A,{}),id:"root",children:[{path:"/",element:Object(Y.jsx)(Je,{}),id:"homePage",errorElement:Object(Y.jsx)(Y.Fragment,{children:"Error on HomePage"})},{path:"/basket",element:Object(Y.jsx)(Xe,{}),id:"basketPage",errorElement:Object(Y.jsx)(Y.Fragment,{children:"Error on BasketPage"})},{path:"/product/:id",element:Object(Y.jsx)(_e,{}),errorElement:Object(Y.jsx)(Y.Fragment,{children:"Error on ProductPage"})}]}]),ot=n(17),at=n(24),it=n(62),st=n(61),dt=n.n(st),ut=n(6),lt=n.n(ut),bt=n(16),jt=n(14),pt=n(83),xt="https://fakestoreapi.com/products",ft=pt.a.create({baseURL:xt}),gt=function(e){return Object(jt.a)(lt.a.mark((function t(){var n;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft.get(e);case 2:return n=t.sent,console.log("get",xt+e),t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()},Ot=lt.a.mark(mt);function mt(){var e;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("getProductsSaga"),t.next=3,Object(bt.b)(_("loading"));case 3:return t.prev=3,t.next=6,Object(bt.a)(3e3);case 6:return t.next=8,gt("/");case 8:return e=t.sent,console.log(e),t.next=12,Object(bt.b)(Z(e));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(3),t.next=18,Object(bt.b)(ee(t.t0.message));case 18:return t.prev=18,t.next=21,Object(bt.b)(_("idle"));case 21:return t.finish(18);case 22:case"end":return t.stop()}}),Ot,null,[[3,14,18,22]])}var ht=lt.a.mark(vt);function vt(){var e,t;return lt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("sendOrderSaga"),n.next=3,Object(bt.b)(xe("posting"));case 3:return n.prev=3,n.next=6,Object(bt.a)(5e3);case 6:return n.next=8,Object(bt.c)((function(e){return e.basket.storage}));case 8:return e=n.sent,console.log("Your order is:"),e.forEach((function(e){console.log(e.product.title,e.countOrdered)})),n.next=13,Object(bt.c)((function(e){return e.basket.totalSum}));case 13:return t=n.sent,console.log("Your total sum is:",t),n.next=17,Object(bt.b)(pe(!0));case 17:n.next=23;break;case 19:return n.prev=19,n.t0=n.catch(3),n.next=23,Object(bt.b)(fe(n.t0.message));case 23:return n.prev=23,n.next=26,Object(bt.b)(xe("idle"));case 26:return n.finish(23);case 27:case"end":return n.stop()}}),ht,null,[[3,19,23,27]])}var kt=lt.a.mark(wt);function wt(){return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("watchSaga"),e.next=3,Object(bt.e)(X().type,mt);case 3:return e.next=5,Object(bt.d)(je().type,vt);case 5:case"end":return e.stop()}}),kt)}var yt=lt.a.mark(St);function St(){return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("root saga"),e.next=3,wt();case 3:case"end":return e.stop()}}),yt)}var Pt,Ct={popup:{}},Et=Object(G.b)({name:"controls",initialState:Ct,reducers:{resetState:function(){return Ct}}}),zt=Et.reducer,Bt=(Et.actions.resetState,Object(it.a)()),Tt={key:"root",storage:dt.a,whitelist:["basket"]},Ft=Object(ot.b)({control:zt,products:V,basket:se}),Lt=Object(at.g)(Tt,Ft),It=Object(G.a)({reducer:Lt,middleware:function(e){return e({thunk:!1,serializableCheck:{ignoredActions:[at.a,at.f,at.b,at.c,at.d,at.e]}}).concat(Bt)}}),Mt=Object(at.h)(It);Bt.run(St);var Rt=Object(J.a)(Pt||(Pt=Object(N.a)(["\n  * {\n    font-family: 'Raleway', sans-serif;\n    user-select: none;\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n"])));L.a.createRoot(document.getElementById("root")).render(Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(Rt,{}),Object(Y.jsx)(I.a,{store:It,children:Object(Y.jsx)(M.a,{loading:null,persistor:Mt,children:Object(Y.jsx)(R.c,{router:ct})})})]}))}},[[81,1,2]]]);
//# sourceMappingURL=main.6ca8c8ab.chunk.js.map